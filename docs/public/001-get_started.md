
Первая сборка
-------------

1. Для начала нужно [скачать и установить](000-get_started.md) сам движок.  
   Для примера, пусть он будет установлен в каталог `C:\bat_engine`  

2. Теперь нам нужен проект, который можно собрать при помощи cmake. Например:
   ```
   C:\
    |---bat_engine
     `--example_project
         |--- исходники
          `-- CMakeLists.txt
   ```

3. Заходим в каталог проекта, и добавляем батник `make.bat`
   ```
   C:\
    |---bat_engine
     `--example_project
         |--- исходники
         |--- make.bat
          `-- CMakeLists.txt
   ```

4. Содержимое файла `make.bat`

   ```
   set "eDIR_OWNER=%~dp0"
   set "eDIR_BAT_ENGINE=C:\bat_engine\bat\engine"

   call "%eDIR_BAT_ENGINE%\run.bat" ^
       "--build: cmake-makefiles"   ^
       "--configurations: all"
   ```

5. Запускаем батник, и наслаждаемся сборкой.


## Сборка hello_world
Поставляется вместе с [движком](https://github.com/Kartonagnick/bat_engine-windows/tree/master/hello_world)  
Предназначен специально для демонстрации возможностей движка.  
Обратите внимание: инструменты сборки вынесены в отдельный каталог `deploy`.  

1. Запустите сборку с помощью `make.bat`  
2. Ознакомьтесь с содержимым CMakeLists.txt  
3. Обратите внимание на переменные:
   ```
   set(gDEBUG           "$ENV{eDEBUG}"          )
   set(gDIR_PRODUCT     "$ENV{eDIR_PRODUCT}"    )
   set(gEXPANDED_SUFFIX "$ENV{eEXPANDED_SUFFIX}")
   set(gNAME_PROJECT    "$ENV{eNAME_PROJECT}"   )
   ```
4. Это - минимальный набор данных, который вы можете (но не обязаны) использовать,
   что бы определить имя проекта, и каталог, где нужно разместить результаты сборки.  


## Сборка example
Поставляется вместе с [движком](https://github.com/Kartonagnick/bat_engine-windows/tree/master/example)  
Предназначен специально для демонстрации возможностей движка.  
Обратите внимание: 
 - Инструменты сборки вынесены в отдельный каталог `deploy`.  
 - В корне проекта присутствует файл `project.root`  
   - Файл позволяет ограничить список поддерживаемых компиляторов и конфигураций.  

Данный проект - пример использования [Minimalist](https://github.com/Kartonagnick/cmake-minimalist)

1. Запустите сборку с помощью `make.bat`  
   - батник содержит примеры типичного использования 
     всех [команд](002-commands.md) движка.

2. Запустите сборку с помощью `make-full.bat`  
   - батник содержит примеры исчерпывающего синтаксиса 
     всех [команд](002-commands.md) движка.  

3. Ознакомьтесь с содержимым батника: `run-hello.bat`.  
   Обособленный пример того, как запускаются юнит-тесты.  

4. Ознакомтесь с содержимым `run-msvc.bat` и `run-mingw.bat`  
   Батники иллюстрируют, как открыть проект в IDE.  

5. Ознакомьтесь с содержимым каталога `cmake`.  
   Он содержит `CMakeLists.txt` и дополнительные файлы:  
    - `setup.cmake` отвечает за подготовку сценария к работе. Он подключает:  
      - `001-symptoms.cmake` реализует [поиск по симтомам](../dev/006-find.md/#Поиск-по-симптомам)  
      - `002-detect.cmake` набор функций поиска нужных каталогов.  

   Внутри `CMakeLists.txt` практически ничего нет.  
   По сути, всё что он делает - ищет месторасположение модуля [Minimalist](https://github.com/Kartonagnick/cmake-minimalist), 
   и передаёт ему управление.  

   Основополагающая концепция `Minimalist` заключается в том,
   что один и тот же сценарий сборки способен удовлетворить потребности большинства проектов, 
   без необходимости каждый раз допилить его напильником, или писать сценарий сборки с нуля.  
