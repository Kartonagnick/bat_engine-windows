
Cписок поддерживаемых команд:  
-----------------------------

1) [запуск без аргументов](#Запуск-движка-без-аргументов "обновляет настройки движка")  
2) [--update](#--update "обновляет настройки движка")  
3) [--initial](#--initial "обновляет настройки и запчасти движка")  
4) [--version](#--version "печатает в консоль версию движка")  
5) [--generate](#--generate "генерирует MakeFiles для всех указанных конфигураций")  
6) [--build](#--build "выполняет сборку MakeFiles для всех указанных конфигураций")  

Запуск движка без аргументов  
----------------------------
Обновляет настройки.  
```
C:\bat_engine\engine\run.bat
```

--update  
--------
Тоже самое, что и запуск без аргументов: Обновление настроек.  
```
C:\bat_engine\engine\run.bat --update
```

--initial  
---------
Обновляет настройки движка, и все его запчасти.  
```
C:\bat_engine\engine\run.bat --initial
```

--version  
---------
Печатает в консоль версию движка.  
```
C:\bat_engine\engine\run.bat --version
```

--generate  
----------
Генерирует MakeFiles для всех указанных конфигураций.  
```
    call "%eDIR_BAT_ENGINE%\run.bat"      ^
        "--generate: cmake-makefiles"     ^
        "--dir_sources: C:\game"          ^
        "--dir_cmake_list: C:\game\cmake" ^
        "--dir_build:   C:\game\build"    ^
        "--dir_product: C:\game\product"  ^
        "--name_project: "game:"          ^
        "--configurations: all"           ^
        "--defines: STABLE_RELEASE"
```
Предполагается, что в будущем команда будет поддерживать множество генераторов.  
Однако, в настоящий момент поддерживается только работа с cmake.  
Поэтому, `АргументКоманды` должен быть `cmake-makefiles`.  

- `dir_sources` Задаёт путь к каталогу с исходниками.  
  По умолчанию выполняется поиск каталога [по симтомам][1].  

- `dir_cmake_list` Задаёт путь к каталогу, который содержит файл CMakeLists.txt  
  По умолчанию файл CMakeLists.txt ищется [по специальным правилам][2].  

- `dir_build` Задаёт путь к каталогу, где нужно осуществлять сборку.  
  По умолчанию используется значение [из настроек движка][3].  
  `Примечание` К данному пути в дальнейшем будет ещё добавлен [суффикс][3].  

- `dir_product` задаёт путь к каталогу, где нужно разместить результаты сборки.  
  По умолчанию используется значение [из настроек движка][3].  
  `Примечание` К данному пути в дальнейшем будет ещё добавлен [суффикс][3].  

- `name_project` Задаёт имя проекта.  
  По умолчанию используется имя каталога исходников.

- `configurations` Задаёт список [конфигураций][4].  
  По умолчанию используется значение `all`  

- `defines` Задаёт дефайны препроцессора.  
  Можно указать нескольок дефайнов, разделяя их точкой с запятой.  
  Пример: `--defines: KEY=1; NAME="hello"; STABLE`  

`Примечание`
Если в каталоге, где был запущен движок (`eDIR_OWNER`)
присутствует любой из указанных батников:
  - `cmake-{COMPILER}.bat`  
  - `cmake-{GROUP}.bat`  
  - `cmake.bat`  
Тогда именно этот батник будет использован для запуска cmake.  
Примеры запуска батника-исполнителя:  
```
call "%eDIR_OWNER%\cmake.bat"          "generate" "msvc"
call "%eDIR_OWNER%\cmake.bat"          "generate" "mingw"
call "%eDIR_OWNER%\cmake-msvc.bat"     "generate" "msvc"
call "%eDIR_OWNER%\cmake-mingw.bat"    "generate" "mingw"
call "%eDIR_OWNER%\cmake-msvc2019.bat" "generate" "msvc"
```
В качестве аргументов такой батник-исполнитель получает:  
  - имя команды (generate/build/install)  
  - группу (имя компилятора без указания версии).  

Батник должен сгенерировать MakeFile для конфигурации заданной тэгами:  
  - `eCOMPILER`      - компилятор. Например: `msvc2019`.  
  - `eADDRESS_MODEL` - `32х` или `64х` битная сборка.  
  - `eBUILD_TYPE`    - тип сборки: `debug` или `release`.  
  - `eRUNTIME_CPP`   - способ линковки с рантайм с++: `dynamic` или `static`.  

Так же, батник самостоятельно должен добавить `eEXPANDED_SUFFIX` 
к значению `eDIR_BUILD` и `eDIR_PRODUCT`  




--build  
-------
Сначала запускает генератор проектов.  
А затем запускает сборку этих сгенерированных проектов.  
Сборка осуществляется во всех указанных конфигурациях.  
```
    call "%eDIR_BAT_ENGINE%\run.bat"      ^
        "--build: cmake-makefiles"        ^
        "--dir_sources: C:\game"          ^
        "--dir_cmake_list: C:\game\cmake" ^
        "--dir_build:   C:\game\build"    ^
        "--dir_product: C:\game\product"  ^
        "--name_project: "game:"          ^
        "--configurations: all"           ^
        "--defines: STABLE_RELEASE"
```
Предполагается, что в будущем команда будет поддерживать множество генераторов.  
Однако в настоящий момент поддерживается только работа с cmake.  
Поэтому, `АргументКоманды` должен быть `cmake-makefiles`.  

`dir_sources` - задаёт путь к каталогу с исходниками.  
    По умолчанию выполняется поиск каталога [по симтомам][1].  

`dir_cmake_list` задаёт путь к каталогу, который содержит файл CMakeLists.txt  
    По умолчанию файл CMakeLists.txt ищется [по специальным правилам][2].  

`dir_build` задаёт путь к каталогу, где нужно осуществлять сборку.  
    `Примечание` К данному пути в дальнейшем будет ещё добавлен [суффикс][3].  
    По умолчанию используется значение [из настроек движка][3].  

`dir_product` задаёт путь к каталогу, где нужно разместить результаты сборки.  
    `Примечание` К данному пути в дальнейшем будет ещё добавлен [суффикс][3].  
    По умолчанию используется значение [из настроек движка][3].  

`name_project` задаёт имя проекта.  
    По умолчанию используется имя каталога исходников.

`configurations` задаёт список [конфигураций][4], для которых нужно сгенерировать проекты.  
    По умолчанию используется значение `all`  

`defines` задаёт дефайны препроцессора.  
    Можно указать нескольок дефайнов, разделяя их точкой с запятой.  
    Пример: `--defines: KEY=1; NAME="hello"; STABLE`  


--install  
---------
Сначала запускает сборку проектов во всех указанных конфигурациях.  
А затем запускает инсталляцию полученных после сборки продуктов.  
```
    call "%eDIR_BAT_ENGINE%\run.bat"      ^
        "--install: cmake-makefiles"      ^
        "--dir_sources: C:\game"          ^
        "--dir_cmake_list: C:\game\cmake" ^
        "--dir_build:   C:\game\build"    ^
        "--dir_product: C:\game\product"  ^
        "--name_project: "game:"          ^
        "--configurations: all"           ^
        "--defines: STABLE_RELEASE"
```
Предполагается, что в будущем команда будет поддерживать множество генераторов.  
Однако в настоящий момент поддерживается только работа с cmake.  
Поэтому, `АргументКоманды` должен быть `cmake-makefiles`.  

`dir_sources` - задаёт путь к каталогу с исходниками.  
    По умолчанию выполняется поиск каталога [по симтомам][1].  

`dir_cmake_list` задаёт путь к каталогу, который содержит файл CMakeLists.txt  
    По умолчанию файл CMakeLists.txt ищется [по специальным правилам][2].  

`dir_build` задаёт путь к каталогу, где нужно осуществлять сборку.  
    `Примечание` К данному пути в дальнейшем будет ещё добавлен [суффикс][3].  
    По умолчанию используется значение [из настроек движка][3].  

`dir_product` задаёт путь к каталогу, где нужно разместить результаты сборки.  
    `Примечание` К данному пути в дальнейшем будет ещё добавлен [суффикс][3].  
    По умолчанию используется значение [из настроек движка][3].  

`name_project` задаёт имя проекта.  
    По умолчанию используется имя каталога исходников.

`configurations` задаёт список [конфигураций][4], для которых нужно сгенерировать проекты.  
    По умолчанию используется значение `all`  

`defines` задаёт дефайны препроцессора.  
    Можно указать нескольок дефайнов, разделяя их точкой с запятой.  
    Пример: `--defines: KEY=1; NAME="hello"; STABLE`  


[1]: ../dev/006-find.md/#Поиск-каталога-исходного-кода "поиск каталога, который содержит опреленные файлы или подкаталоги"  
[2]: ../dev/006-find.md/#Поиск-CMakeListstxt "поиск каталога, который содержит CMakeLists.txt"  
[3]: 001-settings.md/#Форматирование-файловых-путей "настройки движка"  
[4]: 003-request.md/#Язык-описания-конфигураций "язык описания конфигураций"  



